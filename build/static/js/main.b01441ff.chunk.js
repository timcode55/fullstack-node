(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),o=n.n(c),u=(n(25),n(20)),s=n(4),i=n.n(s),d=n(7),l=n(5),h=n(0),j=function(e){var t=e.newName,n=e.newNumber,r=e.handleSubmit,a=e.handleAddName,c=e.handleAddNumber;return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:r,children:[Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:t,onChange:a})]}),Object(h.jsxs)("div",{children:["Number: ",Object(h.jsx)("input",{value:n,onChange:c})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"add"})})]})})},f=function(e){var t=e.filterName,n=e.handleFilterNames;return Object(h.jsx)("div",{children:Object(h.jsxs)("p",{children:["Filter shown with ",Object(h.jsx)("input",{value:t,onChange:n})]})})},b=function(e){var t=e.persons,n=e.filterName,r=e.handleDeleteRender,a=t.filter((function(e){return e.name.toLowerCase().includes(n)}));return Object(h.jsx)("div",{children:a.map((function(e,t){return Object(h.jsxs)("li",{className:"note",children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:function(){r(e.id)},children:"Delete"})]},e.name)}))})},p=n(3),m=n.n(p),O="http://localhost:3001/api/persons",v=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(O,t).then((function(e){return e.data}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x={getAllPersons:function(){return m.a.get(O).then((function(e){return e.data}))},createPerson:v,updatePerson:function(e,t){m.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},deletePerson:function(e){var t=e.id;m.a.delete("".concat(O,"/").concat(t)).then((function(e){return e.data}))}},w=function(e){var t=e.message;return null===t?null:Object(h.jsx)("div",{className:"error",children:t})},N=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(l.a)(c,2),s=o[0],p=o[1],O=Object(r.useState)(""),v=Object(l.a)(O,2),N=v[0],g=v[1],k=Object(r.useState)(""),S=Object(l.a)(k,2),A=S[0],y=S[1],P=Object(r.useState)(!1),C=Object(l.a)(P,2),R=C[0],D=C[1],E=Object(r.useState)(""),T=Object(l.a)(E,2),F=T[0],I=T[1];Object(r.useEffect)((function(){m.a.get("http://localhost:3001/api/persons").then((function(e){a(e.data)}))}),[R]);var J=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("http://localhost:3001/api/persons/".concat(t)).then((function(e){}));case 2:D((function(){return!R}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),F&&Object(h.jsx)(w,{message:F}),Object(h.jsx)(f,{persons:n,filterName:A,handleFilterNames:function(e){y(e.target.value.toLowerCase())}}),Object(h.jsx)("h1",{children:"Add A New Entry:"}),Object(h.jsx)(j,{newName:s,newNumber:N,handleAddName:function(e){p(e.target.value)},handleAddNumber:function(e){g(e.target.value)},handleSubmit:function(e){if(e.preventDefault(),n.map((function(e){return e.name})).includes(s)){alert("".concat(s," is already added to the phonebook, replace the old number with a new one?"));var t=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("http://localhost:3001/api/persons").then((function(e){return e.data.filter((function(e){return e.name===s}))}));case 2:0===(t=e.sent).length?(I("Information on '".concat(s,"' was already deleted from server")),alert("Information on '".concat(s,"' was already deleted from server")),setTimeout((function(){I(null)}),3e3)):(x.updatePerson(t[0].id,{name:s,number:N}),I("Added or Updated ".concat(s)),D((function(){return!R})),setTimeout((function(){I(null)}),3e3)),D((function(){return!R}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}else x.createPerson({name:s,number:N}).catch((function(e){console.log(e.response.data.error,"ERROR........"),I("".concat(e.response.data.error)),setTimeout((function(){I(null)}),3e3)})),I("Added or Updated ".concat(s)),setTimeout((function(){I(null)}),3e3),a([].concat(Object(u.a)(n),[{name:s,number:N}]));p(""),g("")}}),Object(h.jsx)("h1",{children:"Numbers"}),Object(h.jsx)(b,{filterName:A,persons:n,handleDeleteRender:J})]})};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.b01441ff.chunk.js.map